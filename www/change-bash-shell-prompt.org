#+SETUPFILE: css/level-0.orgcss
#+TITLE: 定制 Shell 提示符

* Shell 类型标识

  在打开的终端等待输入命令时，往往显示部分信息，如显示当前日期、符号“>”、“$” 等等，这就是命令提示符。

  我们可能会注意到，在使用不同的用户标识、不同的 Shell 类型时，会出现诸如 $、#、% 等提示符。默认情况下，它们都有标志意义的。通过下表，可以进行了解一下。

  #+CAPTION: 标准 Shell 提示
  | Shell提示 | Shell 类型   |
  | $         | Bash         |
  | %         | C-shell 家族 |
  | %或>      | Tcsh         |
  | #         | 根用户，root |

  当我们看到这些 Shell 提示符时，应该灵敏地感觉到自己处在什么 Shell 类型之中。尤其是出现“#”时，也应该意识到：我正在以 root 用户标识登陆，我的每一步操作都应该谨慎。
  
* 定制 Bash Shell 命令提示符
** 引子

   在多数 Linux 下，一般提供 Bash 作为默认 Shell。但不同的系统中，你会看到不同的命令提示符，如 Fedora 下：

   #+BEGIN_QUOTE
   [fedora@fedora ~]$ 
   #+END_QUOTE

   或者，它们默认提供的颜色也不一致。这就是我们要讨论的：如何去定制更加个性化的命令提示符。
   
** 环境变量 PS1

   Shell 命令提示符实际上由一个环境变量 PS1 来设置的，上面的例子 PS1 值为：

   #+BEGIN_SRC shell
   $ echo $PS1#显示PS1变量值
   [\u@\h \W]\$
   #+END_SRC

   在 Shell 提示中，我们可以使用「环境变量」和「特殊码」来定制提示符。

   #+CAPTION: Shell 提示中有用的环境变量
   | 变量     | 含义                      |
   | HOME     | 主文件夹目录              |
   | HOSTNAME | 计算机名称                |
   | HOSTTYPE | 主机类型（CPU架构）           |
   | LOGNAME  | 当前用户标识              |
   | PWD      | 当前工作目录              |
   | RANDOM   | 0～32767之间的随机数      |
   | SECONDS  | 当前 shell 运行时间（秒） |
   | SHELL    | 登陆 Shell 的路径名       |
   | USER     | 当前用户标识              |

   当我们要在命令提示符中使用上述环境变量时，可以直接将其插入在命令提示符中，如：

   #+BEGIN_SRC shell
   export PS1="$USER >"
   #+END_SRC 

   当然，上面的环境变量有限，提供的信息也没有足够的吸引力。Bash 还允许通过插入一些反斜杠转义的特殊字符来定制命令提示符（ =man bash= ）：

   | \d | 日期，格式是 "星期 月份 日" (例如，"Tue May 26")               |
   | \h | 主机名，第一个 `.' 之前的部分                                  |
   | \H | 主机名                                                         |
   | \n | 换行                                                           |
   | \r | 回车                                                           |
   | \t | 显示当前时间，采用 24小时制 HH:MM:SS 格式                      |
   | \T | 显示当前时间，采用 12小时制的 HH:MM:SS 格式                    |
   | \@ | 显示当前时间，采用 12小时制「上午/下午」格式                   |
   | \A | 显示当前时间，采用 24小时制「上午/下午」格式                   |
   | \u | 当前用户的用户名                                               |
   | \w | 当前工作目录                                                   |
   | \W | 当前工作目录的基本部分                                         |
   | \! | 此命令的历史编号                                               |
   | \# | 此命令的命令编号                                               |
   | \$ | 如果有效 UID 是 0，就是 #, 其他情况下是 $                      |
   | \\ | 一个反斜杠                                                     |
   | \[ | 一个不可打印字符序列的开始，可以用于在提示符中嵌入终端控制序列 |
   | \] | 一个不可打印字符序列的结束                                     |

   结合上面提供的可用特殊字符，定制个性化的命令提示符并不困难了。

* 相关链接
  + [[http://tuhaihe.com/oh-my-zsh.html][Oh my Zsh !]]
